<SettingsScreen>:
    id: settings
    BoxLayout:
        orientation: "vertical"
        GridLayout:
            cols: 2
            spacing: 10, 10
            Label:
                size_hint: None, None
                size: root.width/2, 60
                text: "Default language"
            Spinner:
                size_hint: None, None
                size: root.width/2, 60
                text: root.default_language
                values: "Arabic", "English"
                on_text:
                    root.default_language = self.text
            Label:
                size_hint: None, None
                size: root.width/2, dp(60)
                text: "Pronunciation helper"
            ToggleButton:
                size_hint: None, None
                size: root.width/2, dp(60)
                text: "ON" if root.pronunciation else "OFF"
                state: 'down' if root.pronunciation else 'normal'
                on_press:
                    root.toggle_pronunciation()
        GridLayout:
            cols: 1
            spacing: 10, 10
            Button:
                text: "Dictionary"
                size_hint: None, None
                size: root.width, dp(60)
                on_release:
                    root.manager.current = "DICTIONARY"
            Button:
                text: "Filters"
                size_hint: None, None
                size: root.width, dp(60)
                on_release:
                    root.manager.current = "FILTERS"
            Button:
                text: "Topics"
                size_hint: None, None
                size: root.width, dp(60)
                on_release:
                    root.manager.current = "TOPICS"
        Button:
            size_hint: None, None
            size: root.width, dp(60)
            text: "Back"
            on_release:
                app.root.get_screen('CARD').re_init()
                root.manager.current = "CARD"


<CategoryFilterScreen>:
    BoxLayout:
        orientation: "horizontal"
        CategoryFilterView:
    Button:
        size_hint: None, None
        size: root.width, dp(60)
        text: "Back"
        on_press:
            root.manager.current = "SETTINGS"


<CategoryFilterView>:
    viewclass: 'FilterLabel'
    RecycleBoxLayout:
        data: self.data
        default_size: None, dp(60)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'


<TopicFilterScreen>:
    BoxLayout:
        orientation: "horizontal"
        TopicFilterView:
    Button:
        size_hint: None, None
        size: root.width, dp(60)
        text: "Back"
        on_press:
            root.manager.current = "SETTINGS"


<TopicFilterView>:
    viewclass: 'FilterLabel'
    RecycleBoxLayout:
        data: self.data
        default_size: None, dp(60)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'



<FilterLabel@BoxLayout>
    orientation: 'horizontal'
    text: ""
    enabled: True
    type: ""
    Label:
        text: root.text
        color: 1,1,1,1
    CheckBox:
        color: 1,1,1,1
        active: not root.enabled
        on_active:
            app.root.get_screen('CARD').set_filter(root.text, root.type)



<CardScreen>:
    background_color: (1,1,1,1)
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            size: self.size
            pos: self.pos
    GridLayout:
        cols: 1
        rows: 3
        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 1
            Label:
                size_hint_x: 0.75
            Button:
                size_hint_x: 0.25
                text: "â‰¡"
                font_name: 'arial'
                font_size: 60
                background_normal: ''
                background_color: 1,1,1,1
                color: 0,0,0,1
                on_release:
                    root.manager.current = "SETTINGS"
        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 8
            Button:
                size_hint_x: 8
                background_normal: ''
                background_color: 1,1,1
                color: 0,0,0,1
                text: root.display_word
                font_name: 'arial'
                font_size: 100
                text_size : self.width, None
                halign: "center"
                valign: "middle"
                on_press: root.swap_lang()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 1
            Label:
                size_hint_x: 0.5
            Button:
                text: '<'
                size_hint_x: 0.25
                on_press: root.browse('LEFT')
                font_name: 'arial'
                font_size: 100
                size: root.width, dp(60)
                background_normal: ''
                background_color: 1,1,1
                color: 0,0,0,1
            Button:
                text: '>'
                size_hint_x: 0.25
                on_press: root.browse('RIGHT')
                font_name: 'arial'
                font_size: 100
                size: root.width, dp(60)
                background_normal: ''
                background_color: 1,1,1
                color: 0,0,0,1


<DictionaryScreen>:
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"
        size_hint_y: 1
        BoxLayout:
            orientation: "horizontal"
            DictHeader:
                text: "English"
                size_hint_x: 4
            DictHeader:
                text: "Arabic"
                size_hint_x: 4
            DictHeader:
                text: ""
                size_hint_x: 2
        DictView:
            id: dictionary_view
            size_hint_y: 9
        Button:
            size_hint: None, None
            size: root.width, 60
            text: "Add new word"
            on_release:
                app.root.get_screen('WORD_EDIT').reset_view()
                app.root.get_screen('WORD_EDIT').set_default_index()
                app.root.current = "WORD_EDIT"
        Button:
            size_hint: None, None
            size: root.width, dp(60)
            text: "Save & export dictionary"
            on_press:
                root.export_dict()
        Button:
            size_hint: None, None
            size: root.width, dp(60)
            text: "Back"
            on_press:
                root.manager.current = "SETTINGS"

<DictView>:
    viewclass: 'WordWidget'
    RecycleBoxLayout:
        data: self.data
        default_size: None, dp(60)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'

<WordWidget@BoxLayout>:
    arabic: ""
    english: ""
    pronunciation: ""
    index: 0
    orientation: "horizontal"
    DictLabel:
        index: root.index
        size_hint_x: 4
        text: root.english
    DictLabel:
        index: root.index
        font_size: 60
        size_hint_x: 4
        text: root.arabic
    BoxLayout:
        index: root.index
        size_hint_x: 2
        orientation: "horizontal"
        Button:
            text: "Edit"
            color: (76/255, 76/255, 109/255,1)
            background_normal: ''
            background_color: (255/255, 225/255, 148/255, 1) if root.index%2==1 else (255/255, 225/255, 148/255, 0.7)
            on_press:
                app.root.get_screen('WORD_EDIT').set_default_index(root.index)
                app.root.current = "WORD_EDIT"


<DictLabel@Label>:
    index: 0
    padding: 30, 10
    text_size: self.size
    halign: 'left'
    valign: 'middle'
    font_name: 'arial'
    color: 76/255, 76/255, 109/255, 1
    canvas.before:
        Color:
            rgba: (184/255,223/255,216/255,1) if root.index%2==1 else (232/255,246/255,239/255,1)
        Rectangle:
            size: self.size
            pos: self.pos

<DictHeader@Label>:
    padding: 30, 10
    text_size: self.size
    color: 232/255, 246/255, 239/255, 1
    halign: 'left'
    valign: 'bottom'
    font_name: 'arial'
    canvas.before:
        Color:
            rgba: (76/255,76/255,109/255,1)
        Rectangle:
            size: self.size
            pos: self.pos


<WordEditScreen>:
    GridLayout:
        cols: 2
        Label:
            text: "English"
            size_hint_x: 3
        TextInput:
            id: word_english_text
            text: root.word_english_text
            size_hint_x: 7
            font: 'arial'
        Label:
            text: "Arabic"
        ArabicTextInput:
            id: word_arabic_text
            text: root.word_arabic_text
        Label:
            text: "Pronunciation"
        TextInput:
            id: word_pronunciation
            text: root.word_pronunciation
        Label:
            text: "Category"
        Spinner:
            id: word_category
            text: root.word_category
            values: root.categories
        Label:
            text: "Topic"
        Spinner:
            id: word_topic
            text: root.word_topic
            values: root.topics
        Label:
            text: "Enabled"
        CheckBox:
            id: word_enabled
            active: root.word_enabled
        Button:
            text: "Back to dictionary"
            on_press:
                app.root.get_screen('DICTIONARY').ids.dictionary_view.update()
                root.manager.current = "DICTIONARY"
        GridLayout:
            cols: 1
            rows: 2
            Button:
                text: "Delete word"
                disabled: True if root.current_index is None else False
                on_press:
                    root.delete_word()
                    app.root.get_screen('DICTIONARY').ids.dictionary_view.update()
                    root.manager.current = "DICTIONARY"
            Button:
                text: "Save"
                on_press: root.save_word()

<ArabicTextInput>:
    font_name: 'arial'
    font_size: 40

