<SettingsScreen>:
    id: settings
    GridLayout:
        cols: 2
        spacing: 10, 10
        Label:
            size_hint: None, None
            size: root.width/2, 60
            text: "Default language"
        Spinner:
            size_hint: None, None
            size: root.width/2, 60
            text: root.default_language
            values: "Arabic", "English"
            on_text:
                root.default_language = self.text
        Label:
            size_hint: None, None
            size: root.width/2, 60
            text: "Pronunciation helper"
        ToggleButton:
            size_hint: None, None
            size: root.width/2, 60
            text: "ON" if root.pronunciation else "OFF"
            state: 'down' if root.pronunciation else 'normal'
            on_press:
                root.toggle_pronunciation()
    Button:
        size_hint: None, None
        size: root.width, 50
        text: "Back to main menu"
        on_release:
            root.manager.current = "MENU"

<MenuScreen>:
    BoxLayout:
        orientation: "vertical"
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Card"
            on_release:
                app.root.get_screen('CARD').re_init()
                root.manager.current = "CARD"
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Settings"
            on_release:
                root.manager.current = "SETTINGS"
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Dictionary"
            on_release:
                root.manager.current = "DICTIONARY"


<CardScreen>:
    GridLayout:
        cols: 1
        rows: 3
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: '<'
                size_hint_x: 1
                on_press: root.browse('LEFT')
            Button:
                size_hint_x: 8
                color: 0,0,0
                background_normal: ''
                background_color: 1,1,1
                text: root.display_word
                font_name: "font/arial"
                font_size: 60
                on_press: root.swap_lang()
            Button:
                text: '>'
                size_hint_x: 1
                on_press: root.browse('RIGHT')
        GridLayout:
            size_hint: None, None
            size: root.width, root.height/2 - root.height/4 - root.height/8
            cols: 3

            Button:
                text: 'Shuffle'
                on_press: root.shuffle()
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Back to menu"
            on_release:
                root.manager.current = "MENU"


<DictionaryScreen>:
    canvas.before:
        Color:
            rgba: (1,1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"
        size_hint_y: 1
        BoxLayout:
            orientation: "horizontal"
            DictHeader:
                text: "English"
                size_hint_x: 4
            DictHeader:
                text: "Arabic"
                size_hint_x: 4
            DictHeader:
                text: ""
                size_hint_x: 2
        DictView:
            id: dictionary_view
            size_hint_y: 9
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Add new word"
            on_release:
                app.root.get_screen('WORD_EDIT').reset_view()
                app.root.get_screen('WORD_EDIT').set_default_index()
                app.root.current = "WORD_EDIT"
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Save & export dictionary"
            on_press:
                root.export_dict()
        Button:
            size_hint: None, None
            size: root.width, 50
            text: "Back to main menu"
            on_press:
                root.manager.current = "MENU"

<DictView>:
    viewclass: 'WordWidget'
    RecycleBoxLayout:
        data: self.data
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'

<WordWidget@BoxLayout>:
    arabic: ""
    english: ""
    pronunciation: ""
    index: 0
    orientation: "horizontal"
    DictLabel:
        index: root.index
        size_hint_x: 4
        text: root.english
    DictLabel:
        index: root.index
        font_size: 30
        size_hint_x: 4
        text: root.arabic
    BoxLayout:
        index: root.index
        size_hint_x: 2
        orientation: "horizontal"
        Button:
            text: "Edit"
            color: (76/255, 76/255, 109/255)
            background_normal: ''
            background_color: (255/255, 225/255, 148/255, 1) if root.index%2==1 else (255/255, 225/255, 148/255, 0.7)
            on_press:
                app.root.get_screen('WORD_EDIT').set_default_index(root.index)
                app.root.current = "WORD_EDIT"


<DictLabel@Label>:
    index: 0
    padding: 30, 10
    text_size: self.size
    halign: 'left'
    valign: 'middle'
    font_name: "font/arial"
    color: 76/255, 76/255, 109/255
    canvas.before:
        Color:
            rgba: (184/255,223/255,216/255,1) if root.index%2==1 else (232/255,246/255,239/255,1)
        Rectangle:
            size: self.size
            pos: self.pos

<DictHeader@Label>:
    padding: 30, 10
    text_size: self.size
    color: 232/255, 246/255, 239/255
    halign: 'left'
    valign: 'bottom'
    font_name: "font/arial"
    canvas.before:
        Color:
            rgba: (76/255,76/255,109/255,1)
        Rectangle:
            size: self.size
            pos: self.pos


<WordEditScreen>:
    GridLayout:
        cols: 2
        Label:
            text: "English"
            size_hint_x: 3
        TextInput:
            id: word_english_text
            text: root.word_english_text
            size_hint_x: 7
        Label:
            text: "Arabic"
        ArabicTextInput:
            id: word_arabic_text
            text: root.word_arabic_text
        Label:
            text: "Pronunciation"
        TextInput:
            id: word_pronunciation
            text: root.word_pronunciation
        Label:
            text: "Category"
        Spinner:
            id: word_category
            text: root.word_category
            values: root.categories
        Label:
            text: "Topic"
        Spinner:
            id: word_topic
            text: root.word_topic
            values: root.topics
        Label:
            text: "Enabled"
        CheckBox:
            id: word_enabled
            active: root.word_enabled
        Button:
            text: "Back to dictionary"
            on_press:
                app.root.get_screen('DICTIONARY').ids.dictionary_view.update()
                root.manager.current = "DICTIONARY"
        GridLayout:
            cols: 1
            rows: 2
            Button:
                text: "Delete word"
                disabled: True if root.current_index is None else False
                on_press:
                    root.delete_word()
                    app.root.get_screen('DICTIONARY').ids.dictionary_view.update()
                    root.manager.current = "DICTIONARY"
            Button:
                text: "Save"
                on_press: root.save_word()

<ArabicTextInput>:
    font_name: 'font/arial'
    font_size: 40

